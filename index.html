<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>NAK!S — demo upload</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Montserrat:wght@700;900&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b0b0b; --panel:#0f0f10; --text:#fff; --muted:#b5b5b5; --accent:#e21b1b;
  --shadow: 0 10px 30px rgba(0,0,0,0.65);
  --glow: 0 0 18px rgba(226,27,27,0.25);
  --border: rgba(255,255,255,0.06);
  --transition-fast: 260ms ease;
  --transition-slow: 700ms ease;
}
:root.light{
  --bg:#f6f6f7; --panel:#fff; --text:#111; --muted:#444; --glow:0 0 14px rgba(226,27,27,0.12); --border: rgba(0,0,0,0.08);
}

*{box-sizing:border-box}
body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text);transition:background var(--transition-slow),color var(--transition-fast);overflow-x:hidden}
a{color:var(--accent)}

/* hero */
.hero{height:92vh;display:grid;place-items:center;text-align:center;padding:20px;position:relative;overflow:visible}
.logo{font-family:Montserrat, sans-serif;font-size:clamp(48px,14vw,160px);font-weight:900;letter-spacing:.02em;cursor:pointer;transition:transform .36s cubic-bezier(.2,.9,.3,1), filter .36s}
.logo-gradient{background:linear-gradient(90deg,var(--accent) 50%, var(--text) 50%);-webkit-background-clip:text;color:transparent}
.subtitle{margin-top:10px;color:var(--muted);font-weight:600}

/* controls */
.controls{position:fixed;right:16px;top:16px;display:flex;gap:10px;z-index:60}
.btn{background:var(--panel);color:var(--text);border-radius:12px;padding:8px 12px;border:1px solid var(--border);cursor:pointer;box-shadow:var(--shadow);font-weight:700;transition:transform var(--transition-fast)}
.btn:active{transform:translateY(2px)}

/* container */
.container{max-width:1100px;margin:0 auto;padding:28px}

/* card */
.card{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);padding:24px;border-radius:14px;border:1px solid var(--border);margin-bottom:26px;box-shadow:var(--shadow)}
h2{font-family:Montserrat;margin:0 0 12px 0}

/* bio */
.bio-flex{display:flex;gap:18px;flex-wrap:wrap}
.bio-text{flex:1;min-width:240px;line-height:1.6}
.bio-avatar{width:200px;height:200px;border-radius:14px;background:linear-gradient(135deg, rgba(226,27,27,0.15), rgba(0,0,0,0.18));display:flex;align-items:center;justify-content:center;font-weight:900;font-size:48px;color:var(--text);box-shadow:var(--glow),var(--shadow)}

/* timeline */
.timeline{overflow-x:auto;padding-bottom:10px}
.timeline-line{height:4px;background:var(--border);margin:26px 0;border-radius:4px}
.timeline-items{display:flex;gap:36px;min-width:680px;padding:8px}
.dot{display:flex;flex-direction:column;align-items:center;gap:8px;cursor:pointer;transition:transform .2s,filter .2s}
.point{width:18px;height:18px;border-radius:999px;background:var(--panel);border:2px solid var(--border);transition:all .2s}
.year{font-weight:700;color:var(--muted)}
.dot.active .point{transform:scale(1.6);background:var(--accent);box-shadow:var(--glow)}
.dot.active .year{color:var(--accent)}

/* detail */
.detail-box{margin-top:14px;padding:16px;border-radius:10px;border:2px solid var(--accent);background:rgba(0,0,0,0.46);display:none}
.detail-box.show{display:block}

/* drop */
.drop-zone{border:2px dashed var(--border);padding:22px;border-radius:12px;text-align:center;min-height:120px;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:10px}
.file-list{margin-top:12px;display:flex;flex-direction:column;gap:8px}

/* progress */
.progress-wrap{width:100%;background:linear-gradient(90deg, rgba(255,255,255,0.03), transparent);border-radius:8px;overflow:hidden;border:1px solid var(--border)}
.progress-bar{height:10px;width:0%;background:linear-gradient(90deg,var(--accent), #ff6b6b);transition:width .2s}

/* small */
.small{font-size:13px;color:var(--muted)}

/* animations and distortion */
.fade-in{animation:fadeIn .6s both}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}

/* distortion overlay */
.distort{position:fixed;inset:0;pointer-events:none;mix-blend-mode:screen;opacity:0;transition:opacity 200ms}
.distort.active{opacity:.9;animation:distortAnim .45s steps(8, end)}
@keyframes distortAnim{
  0%{filter:contrast(1) hue-rotate(0deg) blur(0px)}
  50%{filter:contrast(1.2) hue-rotate(10deg) blur(1px)}
  100%{filter:contrast(1) hue-rotate(0deg) blur(0px)}
}

/* responsive */
@media (max-width:800px){
  .hero{height:80vh}
  .timeline-items{min-width:520px}
  .bio-avatar{width:150px;height:150px;font-size:36px}
}
</style>
</head>
<body>

<div class="distort" id="distort"></div>

<!-- controls -->
<div class="controls">
  <button class="btn" id="toContent">Explore ↓</button>
  <button class="btn" id="modeToggle">Light / Dark</button>
</div>

<!-- hero -->
<section class="hero">
  <div>
    <div class="logo logo-gradient" id="logo">NAK!S</div>
    <div class="subtitle small">Producer • Sound Designer • Audio Experimentalist</div>
  </div>
</section>

<div class="container">

  <!-- BIO -->
  <section class="card fade-in">
    <h2>Biography</h2>
    <div class="bio-flex">
      <div class="bio-text">
        NAK!S grew from the crackle of a found vinyl sample into a full audio practice that treats sound like built space.
        Working with modular synths, tape loops and field recordings, he sculpts layers that are simultaneously intimate and cinematic.
        <br><br>
        Over the years he collaborated with indie filmmakers, choreographers and underground labels — each project widening his palette:
        from minimal textures to dense polyrhythms and immersive soundtracks. His approach: let the room breathe, but control the tension.
      </div>
      <div class="bio-avatar">N!</div>
    </div>
  </section>

  <!-- TIMELINE -->
  <section class="card fade-in">
    <h2>Timeline</h2>
    <div class="timeline">
      <div class="timeline-line"></div>

      <div class="timeline-items" id="timelineItems">
        <div class="dot" data-detail="2016 — Debut EP “Red Echo”: raw textures and intimate field recordings that started the local buzz.">
          <div class="point"></div><div class="year">2016</div>
        </div>
        <div class="dot" data-detail="2018 — ‘Nocturnes’ collaboration brought cinematic audiences and international playlists.">
          <div class="point"></div><div class="year">2018</div>
        </div>
        <div class="dot" data-detail="2020 — 'Tape & Code' series: merging tape saturation and algorithmic processing into live sets.">
          <div class="point"></div><div class="year">2020</div>
        </div>
        <div class="dot" data-detail="2022 — ‘Pulse’ short film soundtrack; nominated for local sound design awards.">
          <div class="point"></div><div class="year">2022</div>
        </div>
        <div class="dot" data-detail="2024 — 'Midnight Geometry': deep-tech LP exploring polyrhythms and spatialization.">
          <div class="point"></div><div class="year">2024</div>
        </div>
      </div>

      <div class="detail-box" id="detailBox">Click a year to view details.</div>
    </div>
  </section>

  <!-- LINKS -->
  <section class="card fade-in">
    <h2>Streaming & socials</h2>
    <div class="small">Replace # with actual links in the final deployment</div>
    <div style="display:flex;gap:8px;margin-top:12px;flex-wrap:wrap">
      <a class="btn" href="#" style="text-decoration:none">Spotify</a>
      <a class="btn" href="#" style="text-decoration:none">Apple Music</a>
      <a class="btn" href="#" style="text-decoration:none">SoundCloud</a>
      <a class="btn" href="#" style="text-decoration:none">Bandcamp</a>
    </div>
  </section>

  <!-- CONTACT + DROP DEMO -->
  <section class="card fade-in">
    <h2>Contact & Drop demo</h2>
    <div style="display:flex;gap:20px;flex-wrap:wrap">
      <div style="flex:1;min-width:260px">
        <form id="contactForm">
          <input name="name" placeholder="Your name" required />
          <input name="email" placeholder="Email" type="email" required />
          <input name="title" placeholder="Demo title / short note" />
          <textarea name="message" rows="4" placeholder="Message (optional)"></textarea>
        </form>
        <div class="small" id="contactAck"></div>
      </div>

      <div style="flex:1;min-width:300px">
        <div id="drop" class="drop-zone">
          <div>Drag & drop up to 3 audio files (max 50MB each)</div>
          <div class="small">or</div>
          <label class="btn" style="cursor:pointer"><input id="fileInput" type="file" accept="audio/*" multiple style="display:none"> Choose files</label>
          <div class="file-list" id="fileList"></div>
          <div style="margin-top:10px;display:flex;gap:8px;align-items:center">
            <button id="uploadBtn" class="btn">Send demo</button>
            <div style="flex:1">
              <div class="progress-wrap"><div id="progressBar" class="progress-bar"></div></div>
            </div>
          </div>
          <div class="small" id="uploadStatus"></div>
        </div>
      </div>
    </div>
  </section>

  <footer class="small" style="text-align:center;padding:18px">© NAK!S</footer>
</div>

<script>
/* CONFIG: change to http://localhost:3000/upload-demo if server is separate */
const UPLOAD_URL = '/upload-demo'; // change if needed, e.g. 'http://localhost:3000/upload-demo'

/* MODE TOGGLE with distortion + glitch */
const modeToggle = document.getElementById('modeToggle');
const distort = document.getElementById('distort');
modeToggle.addEventListener('click', () => {
  distort.classList.add('active');
  setTimeout(() => {
    document.documentElement.classList.toggle('light');
    setTimeout(()=> distort.classList.remove('active'), 420);
  }, 140);
});

/* scroll */
document.getElementById('toContent').addEventListener('click', ()=>{
  document.querySelector('.container').scrollIntoView({ behavior: 'smooth' });
});
document.getElementById('logo').addEventListener('click', ()=> document.querySelector('.container').scrollIntoView({behavior:'smooth'}));

/* timeline interactions */
const dots = document.querySelectorAll('.dot');
const detailBox = document.getElementById('detailBox');
dots.forEach(dot => {
  dot.addEventListener('click', () => {
    dots.forEach(d=>d.classList.remove('active'));
    dot.classList.add('active');
    detailBox.textContent = dot.dataset.detail;
    detailBox.classList.add('show');
  });
  dot.addEventListener('mouseenter', ()=>{
    dot.classList.add('active');
    detailBox.textContent = dot.dataset.detail;
    detailBox.classList.add('show');
    // blur siblings
    dots.forEach(d => { if (d !== dot) d.style.filter = 'blur(3px) grayscale(.6)'; });
  });
  dot.addEventListener('mouseleave', ()=>{
    // if not clicked keep showing, else remove
    if (!dot.classList.contains('active')) {
      detailBox.classList.remove('show');
    }
    dots.forEach(d => d.style.filter = '');
  });
});

/* parallax hero */
document.addEventListener('mousemove', (e)=>{
  const logo = document.querySelector('.logo');
  const cx = window.innerWidth/2;
  const cy = window.innerHeight/2;
  const dx = (e.clientX - cx) / cx;
  const dy = (e.clientY - cy) / cy;
  logo.style.transform = `perspective(900px) rotateY(${dx * 6}deg) rotateX(${dy * -3}deg) translateZ(0)`;
});

/* Drop / Upload logic */
const fileInput = document.getElementById('fileInput');
const drop = document.getElementById('drop');
const fileListEl = document.getElementById('fileList');
const uploadBtn = document.getElementById('uploadBtn');
const progressBar = document.getElementById('progressBar');
const uploadStatus = document.getElementById('uploadStatus');

let files = [];

fileInput.addEventListener('change', (e) => addFiles(e.target.files));
drop.addEventListener('dragover', (e)=>{ e.preventDefault(); drop.style.transform='scale(1.01)'; });
drop.addEventListener('dragleave', ()=>{ drop.style.transform=''; });
drop.addEventListener('drop', (e)=>{ e.preventDefault(); drop.style.transform=''; addFiles(e.dataTransfer.files); });

function addFiles(list){
  const arr = Array.from(list).slice(0,3 - files.length);
  for (const f of arr) {
    if (f.size > 50 * 1024 * 1024) { alert('File ' + f.name + ' exceeds 50MB.'); continue; }
    if (!f.type.startsWith('audio')) { alert('Only audio files allowed: ' + f.name); continue; }
    files.push(f);
  }
  renderFiles();
}

function renderFiles(){
  fileListEl.innerHTML = '';
  files.forEach((f, i) => {
    const el = document.createElement('div');
    el.style.display = 'flex';
    el.style.justifyContent = 'space-between';
    el.style.padding = '8px';
    el.style.borderRadius = '8px';
    el.style.background = 'linear-gradient(90deg, rgba(255,255,255,0.02), transparent)';
    el.innerHTML = `<div style="font-weight:700">${f.name}</div><div style="font-size:12px;color:var(--muted)">${(f.size/1024/1024).toFixed(2)} MB <button data-i="${i}" style="margin-left:8px" class="btn">✕</button></div>`;
    fileListEl.appendChild(el);
  });
  // attach remove handlers
  fileListEl.querySelectorAll('button').forEach(b => b.addEventListener('click', (e)=>{
    const i = +e.currentTarget.dataset.i;
    files.splice(i,1);
    renderFiles();
  }));
}

/* upload */
uploadBtn.addEventListener('click', () => {
  if (files.length === 0) return alert('Select at least one audio file.');
  if (files.length > 3) return alert('Max 3 files.');
  // gather form data
  const form = document.getElementById('contactForm');
  const formData = new FormData();
  const name = form.name.value || '';
  const email = form.email.value || '';
  const title = form.title.value || '';
  const message = form.message.value || '';
  formData.append('name', name);
  formData.append('email', email);
  formData.append('title', title);
  formData.append('message', message);
  files.forEach(f => formData.append('demos', f));

  // XMLHttpRequest to track progress reliably
  const xhr = new XMLHttpRequest();
  xhr.open('POST', UPLOAD_URL, true);
  xhr.upload.onprogress = (e) => {
    if (e.lengthComputable) {
      const pct = Math.round((e.loaded / e.total) * 100);
      progressBar.style.width = pct + '%';
      uploadStatus.textContent = `Uploading ${pct}%`;
    }
  };
  xhr.onload = () => {
    progressBar.style.width = '0%';
    if (xhr.status >= 200 && xhr.status < 300) {
      const res = JSON.parse(xhr.responseText || '{}');
      if (res.ok) {
        uploadStatus.textContent = 'Upload complete — thank you!';
        files = []; renderFiles();
      } else {
        uploadStatus.textContent = 'Error: ' + (res.error || 'Unknown');
      }
    } else {
      uploadStatus.textContent = 'Upload failed: ' + xhr.statusText;
    }
  };
  xhr.onerror = () => { uploadStatus.textContent = 'Upload error'; progressBar.style.width = '0%'; };

  // small UI lock
  uploadBtn.disabled = true; uploadBtn.textContent = 'Sending...';
  xhr.onreadystatechange = () => {
    if (xhr.readyState === XMLHttpRequest.DONE) {
      uploadBtn.disabled = false; uploadBtn.textContent = 'Send demo';
    }
  };

  xhr.send(formData);
});

/* contact simple acknowledgement (not sending anywhere) */
document.getElementById('contactForm').addEventListener('submit', (e)=>{
  e.preventDefault();
  document.getElementById('contactAck').textContent = 'Saved locally (front-end). Fill out the form fields above when uploading to include metadata.';
});
</script>
</body>
</html>
